<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_1067442_rchklist.createNewChecklist</api_name>
        <caller_access/>
        <client_callable>true</client_callable>
        <description>Instantiate a checklist from a checklist template</description>
        <name>createNewChecklist</name>
        <script><![CDATA[var createNewChecklist = Class.create();
createNewChecklist.prototype = Object.extendsObject(global.AbstractAjaxProcessor, {

    type: 'createNewChecklist',
	createNewChecklist: function () {
		let checklistType = this.getParameter('checklist_type');
		let eventId = this.getParameter('event_id');
		let templateTable = new GlideRecord('Checklist Template Lookup');
		if (templateTable.get('Checklist Type', checklistType)) {
			let checklistTemplate = new GlideRecord(templateTable.get_value('Template Id'));
			checklistTemplate.orderBy('Line Number');
			checklistTemplate.query();
			let checklist = new GlideRecord('Checklist');
			while (checklistTemplate.next()) {
				checklist.initialize();
				checklist.setValue('Answer', checklistTemplate.getValue('Answer'));
				checklist.setValue('Comment', checklistTemplate.getValue('Comment'));
				checklist.setValue('Is Question', checklistTemplate.getValue('Is Question'));
				checklist.setValue('Line Number', checklistTemplate.getValue('Line Number'));
				checklist.setValue('Question', checklistTemplate.getValue('Question'));
				checklist.setValue('Event Id', eventId);
				checklist.insert();
			}
			return true;
		}
		return false;
	}
});]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-20 18:29:23</sys_created_on>
        <sys_id>24de827193c1021003a272918bba1006</sys_id>
        <sys_mod_count>3</sys_mod_count>
        <sys_name>createNewChecklist</sys_name>
        <sys_package display_value="Readiness Checklist" source="x_1067442_rchklist">b6f5afc99370021003a272918bba10b9</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Readiness Checklist">b6f5afc99370021003a272918bba10b9</sys_scope>
        <sys_update_name>sys_script_include_24de827193c1021003a272918bba1006</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-26 15:15:12</sys_updated_on>
    </sys_script_include>
</record_update>
